<div class="alert alert-success hide"></div>
<div class="span8" ng-switch="heroku.status">
  <fieldset ng-switch-when="no-api">
    <legend>Heroku Deploy Configuration</legend>
    <div class="control-group">
      <label for="api-key" class="control-label">Heroku API Key</label>
      <div class="controls">
        <input id="api-key" ng-model="apikey" type="password" class="input-xlarge"/>
      </div>
    </div>
    <div class="form-actions">
      <button ng-click="checkApi()" class="btn btn-primary heroku-prompt">Ok</button>
    </div>
  </fieldset>
  <fieldset ng-switch-when="unconfigured">
    <legend>Heroku Deploy Configuration</legend>
    <div class="control-group">
      <label for="app" class="control-label">Heroku App</label>
      <div class="controls">
        <select id="app" ng-model="existing_app">
          <option value="@@new@@">--Create new app--</option>
          <option ng-repeat="app in heroku_apps" value="[[app.name]]">[[ app.name ]]</option>
        </select>
        <p class="help-block">Deploy to existing Heroku app or create a new one for this repository</p>
        <div class="appname" ng-show="existing_app === '@@new@@'">
          <label for="new-app-name" class="control-label">New app name</label>
          <input id="new-app-name" ng-model="new_app_name" type="text" placeholder="my-new-app" class="input-xlarge"/>
          <p class="help-block">Name of app to create</p>
        </div>
      </div>
    </div>
    <div class="form-actions">
      <button ng-click="herokuSelect()" class="btn btn-primary heroku-select">
        Ok
      </button>
      <button class="btn btn-back" ng-click="goBack()">
        &lt;&lt; Go back
      </button>
    </div>
  </fieldset>
  <div class="row-fluid" ng-switch-when="configured">
    <div class="span10">
      <legend>Heroku Settings</legend>
    </div>
    <div class="row-fluid">
      <div class="span10">
        <div class="well">
          <h3>
            <strong>App Name: </strong>
            <a href="https://[[ deploy_target_name ]].herokuapp.com" target="_blank">
              [[ deploy_target_name ]]
            </a>
          </h3><br/>
          <div class="controlgroup">
            <div class="controls">
              <label class="checkbox">
                Deploy on Green
                <input id="deploy-on-green" type="checkbox"
                       ng-modal="deploy_on_green" autocomplete="off"/>
              </label>
              <p>
                When tests pass, automatically deploy to Heroku. If
                this is unchecked, deployments must be triggered
                manually.
              </p>
            </div>
            <button ng-click="save('deploy_on_green')" id="save-deploy-on-green"
                    class="btn btn-primary form-actions">
              Save Changes
            </button>
            <hr/>
            <div class="controlgroup">
              <h3>Reset Heroku Config</h3>
              <p>
                If you would like to stop deploying this repo to
                Heroku, click the button below.
              </p>
              <div class="controls">
                <a id="remove-heroku-config" class="btn btn-danger">
                  Remove Heroku Configuration
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
